import{_,h as y,u as k,b as n,e as s,q as B,v as c,f as m,x as f,p as w,t as I,a as E,o as l,z as x}from"./index-CNvl0ag0.js";const h={class:"login"},A={class:"container"},z={class:"form-floating"},D={key:0,class:"invalid-feedback"},L={class:"form-floating"},S={key:0,class:"invalid-feedback"},V={__name:"Login",setup(M){const p=/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/,o=y({form:{loginId:"",loginPw:""},errors:{loginId:"",loginPw:""}}),v=E(),i=k(),a=()=>{var r;if((r=o.form.loginId)!=null&&r.trim()){if(!p.test(o.form.loginId))return o.errors.loginId="유효하지 않은 이메일 형식입니다.",!1}else return o.errors.loginId="이메일을 입력해주세요.",!1;return o.errors.loginId="",!0},P=()=>{var r;return(r=o.form.loginPw)!=null&&r.trim()?(o.errors.loginPw="",!0):(o.errors.loginPw="패스워드를 입력해주세요.",!1)},b=async()=>{var e,t,d,g,u;if(!a()){window.alert(o.errors.loginId),(e=document.getElementById("loginId"))==null||e.focus();return}if(!((t=o.form.loginPw)!=null&&t.trim())){window.alert(o.errors.loginPw),(d=document.getElementById("loginPw"))==null||d.focus();return}const r=await x(o.form);switch(console.log(r),r.status){case 200:window.alert("로그인에 성공했습니다."),i.setLoggedIn(!0,r.data),i.setAccessToken(r.data.accessToken),await v.push({name:"home"});break;case 404:window.alert("존재하지 않는 사용자 ID입니다."),o.errors.loginId="존재하지 않는 사용자 ID입니다.",(g=document.getElementById("loginId"))==null||g.focus();break;case 400:window.alert("비밀번호가 일치하지 않습니다."),o.errors.loginPw="비밀번호가 일치하지 않습니다.",(u=document.getElementById("loginPw"))==null||u.focus();break;default:window.alert("로그인 중 알 수 없는 오류가 발생했습니다. 잠시 후 다시 시도해주세요.");break}};return(r,e)=>(l(),n("div",h,[s("div",A,[s("form",{class:"py-5 d-flex flex-column gap-3",onSubmit:B(b,["prevent"])},[e[4]||(e[4]=s("h1",{class:"h5 mb-3"},"로그인",-1)),s("div",z,[c(s("input",{type:"email",class:w(["form-control",{"is-invalid":o.errors.loginId}]),id:"loginId",placeholder:"이메일","onUpdate:modelValue":e[0]||(e[0]=t=>o.form.loginId=t),onBlur:a},null,34),[[f,o.form.loginId]]),e[2]||(e[2]=s("label",{for:"loginId"},"이메일",-1)),o.errors.loginId?(l(),n("div",D,I(o.errors.loginId),1)):m("",!0)]),s("div",L,[c(s("input",{type:"password",class:w(["form-control",{"is-invalid":o.errors.loginPw}]),id:"loginPw",placeholder:"패스워드","onUpdate:modelValue":e[1]||(e[1]=t=>o.form.loginPw=t),onBlur:P},null,34),[[f,o.form.loginPw]]),e[3]||(e[3]=s("label",{for:"loginPw"},"패스워드",-1)),o.errors.loginPw?(l(),n("div",S,I(o.errors.loginPw),1)):m("",!0)]),e[5]||(e[5]=s("button",{type:"submit",class:"w-100 h6 btn py-3 btn-primary"},"로그인",-1))],32)])]))}},Z=_(V,[["__scopeId","data-v-35eea43f"]]);export{Z as default};
