import{g as h}from"./itemService-BQRUXUkn.js";import{a as f}from"./cartService-CSdFE7ww.js";import{_ as y,u as b,s as v,c as w,a as L,r as x,b as n,o as i,d as _,e,w as $,n as k,t as c,f as p,g as S,h as I,i as C,j as E,F as N,k as P}from"./index-CNvl0ag0.js";const B={class:"card shadow-sm"},H=["aria-label"],D={class:"card-body"},T={class:"card-text"},V={class:"me-2"},j={class:"discount badge bg-danger"},z={class:"card-summary text-muted mb-3"},F={class:"d-flex justify-content-between align-items-center"},R={class:"price text-muted"},A={class:"real text-danger"},M={__name:"Card",props:{item:{id:Number,imgPath:String,name:String,summary:String,price:Number,discountPer:Number}},setup(d){const t=b(),{loggedIn:l}=v(t),s=d,o=w(()=>(s.item.price-s.item.price*s.item.discountPer/100).toLocaleString()+"ì›"),a=L(),r=async()=>{(await f(s.item.id)).status===200&&window.confirm("ì¥ë°”êµ¬ë‹ˆì— ìƒí’ˆì„ ë‹´ì•˜ìŠµë‹ˆë‹¤. ì¥ë°”êµ¬ë‹ˆë¡œ ì´ë™í•˜ì‹œê² ìŠµë‹ˆê¹Œ?")&&await a.push("/cart")};return(m,u)=>{const g=x("router-link");return i(),n("div",B,[_(g,{to:{name:"ItemDetail",params:{id:s.item.id}}},{default:$(()=>[e("span",{class:"img",style:k({backgroundImage:`url(${s.item.imgPath})`}),"aria-label":`ìƒí’ˆ ì‚¬ì§„(${s.item.name})`},null,12,H)]),_:1},8,["to"]),e("div",D,[e("p",T,[e("span",V,c(s.item.name),1),e("span",j,c(s.item.discountPer)+"%",1)]),e("p",z,c(s.item.summary),1),e("div",F,[S(l)?(i(),n("button",{key:0,class:"btn btn-primary btn-sm",onClick:u[0]||(u[0]=Y=>r())},"ğŸ›’")):p("",!0),e("small",R,c(s.item.price.toLocaleString())+"ì›",1),e("small",A,c(o.value),1)])])])}}},U=y(M,[["__scopeId","data-v-17f0a859"]]),q={class:"home"},G={class:"album py-5 bg-light"},J={class:"container"},K={class:"row row-cols-1 row-cols-lg-2 row-cols-xl-4 g-4"},O={class:"col"},Q={class:"text-center py-4"},W={key:0,class:"spinner-border text-primary",role:"status"},X={key:1,class:"text-muted"},et={__name:"Home",setup(d){const t=I({items:[],args:{page:0,size:8},isLast:!1,isLoading:!1}),l=async()=>{if(!(t.isLoading||t.isLast)){t.isLoading=!0;try{const o=await h(t.args);if(o.status===200){const a=o.data.content;t.items.push(...a),t.isLast=o.data.last,t.args.page++}}catch(o){console.error("ìƒí’ˆ ë¡œë“œ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:",o)}finally{t.isLoading=!1}}},s=()=>{const o=document.documentElement.scrollHeight,a=document.documentElement.scrollTop,r=document.documentElement.clientHeight;a+r+100>=o&&l()};return C(()=>{l(),window.addEventListener("scroll",s)}),E(()=>{window.removeEventListener("scroll",s)}),(o,a)=>(i(),n("div",q,[e("div",G,[e("div",J,[e("div",K,[(i(!0),n(N,null,P(t.items,r=>(i(),n("div",O,[_(U,{item:r},null,8,["item"])]))),256))])]),e("div",Q,[t.isLoading?(i(),n("div",W,[...a[0]||(a[0]=[e("span",{class:"visually-hidden"},"Loading...",-1)])])):t.isLast&&t.items.length>0?(i(),n("p",X," ë” ì´ìƒ ì‘í’ˆì´ ì—†ìŠµë‹ˆë‹¤. ğŸ–¼ï¸ ")):p("",!0)])])]))}};export{et as default};
