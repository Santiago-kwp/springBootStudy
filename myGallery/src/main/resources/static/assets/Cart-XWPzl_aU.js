import{_ as k,h as v,c as b,b as n,e as t,F as l,i as w,d as y,w as x,r as g,a as C,o,k as I,q as V,t as d,x as j}from"./index-CAEnLQrx.js";import{g as B,r as F,b as N}from"./cartService-Db-1dUZh.js";const q={class:"cart"},A={class:"container"},D={class:"items"},L=["onUpdate:modelValue"],P=["alt","src"],S={class:"name"},T={class:"price"},U=["onClick"],$={class:"d-flex justify-content-end"},E={key:1,class:"text-center py-5"},M={__name:"Cart",setup(O){const m=C(),c=v({items:[]}),r=async()=>{const e=await B();e.status===200&&(c.items=e.data.map(a=>({...a,checked:!0})))},u=b(()=>c.items.filter(e=>e.checked).map(e=>e.id)),_=async e=>{(await N(e)).status===200&&(window.alert("선택하신 장바구니의 상품을 삭제했습니다."),await r())},p=async()=>{(await F()).status===200&&(window.alert("장바구니 전체 상품을 삭제했습니다."),await r())},h=()=>{const e=u.value;if(e.length===0){window.alert("선택된 상품이 없습니다.");return}m.push({name:"orderForm",query:{itemIds:e.join(",")}})};return async function(){await r()}(),(e,a)=>{const f=g("router-link");return o(),n("div",q,[t("div",A,[c.items.length?(o(),n(l,{key:0},[t("div",{class:"d-flex justify-content-end mb-2 mt-4"},[t("button",{class:"btn btn-sm btn-outline-danger",onClick:p}," 장바구니 전체 비우기 ")]),t("ul",D,[(o(!0),n(l,null,w(c.items,s=>(o(),n("li",null,[I(t("input",{type:"checkbox","onUpdate:modelValue":i=>s.checked=i,class:"form-check-input me-3"},null,8,L),[[V,s.checked]]),t("img",{alt:`상품 사진(${s.name})`,src:s.imgPath},null,8,P),t("b",S,d(s.name),1),t("span",T,d((s.price-s.price*s.discountPer/100).toLocaleString())+"원 ",1),t("span",{class:"remove float-end",onClick:i=>_(s.id),title:"삭제"},"×",8,U)]))),256))]),t("div",{class:"act mb-2 d-flex justify-content-center"},[t("button",{class:"btn btn-primary",onClick:h},"선택 상품 주문하기")]),t("div",$,[y(f,{to:"/",class:"btn btn-secondary"},{default:x(()=>[...a[0]||(a[0]=[j("갤러리 이동",-1)])]),_:1})])],64)):(o(),n("div",E,"장바구니가 비어있습니다."))])])}}},G=k(M,[["__scopeId","data-v-9473bee5"]]);export{G as default};
